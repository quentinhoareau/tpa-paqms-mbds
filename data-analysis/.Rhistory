library(cluster)
library(ggplot2)
clients <- read.csv("Clients 10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
clients <- read.csv("Clients_10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- read.csv("Immatriculations.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
str(clients)
str(immatriculations)
clients_immatriculations <- merge(clients, immatriculations, by = "immatriculation")
str(clients_immatriculations)
clients_immatriculations <- merge(clients, immatriculations, by = "immatriculation")
str(clients_immatriculations)
dmatrix <- daisy(clients_immatriculations[, c("age", "sexe", "immatriculation", "marque", "modele", "puissance", "carburant", "km", "prix")], metric = "gower")
dmatrix <- daisy(clients_immatriculations[, c("age", "sexe", "immatriculation", "marque", "modele", "puissance", "prix")], metric = "gower")
dmatrix <- daisy(clients_immatriculations)
dmatrix <- daisy(clients_immatriculations[, c("age", "nbEnfantsAcharge", "situatuinFamiliale", "taux")], metric = "gower")
dmatrix <- daisy(clients_immatriculations[, c("age", "nbEnfantsAcharge", "situationFamiliale", "taux")], metric = "gower")
dmatrix <- daisy(clients_immatriculations[, c("age", "nbEnfantsAcharge", "situationFamiliale", "taux")])
gc()
library(cluster)
library(ggplot2)
clients <- read.csv("Clients_10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- read.csv("Immatriculations.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
str(clients)
str(immatriculations)
clients_immatriculations <- merge(clients, immatriculations, by = "immatriculation")
str(clients_immatriculations)
dmatrix <- daisy(clients_immatriculations[, c("age", "nbEnfantsAcharge", "situationFamiliale", "taux")])
gc()
merged_data <- merge(clients, immatriculations, by = "immatriculation", all.x = TRUE)
library(cluster)
library(ggplot2)
clients <- read.csv("Clients_10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- read.csv("Immatriculations.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
str(clients)
str(immatriculations)
merged_data <- merge(clients, immatriculations, by = "immatriculation", all.x = TRUE)
str(merged_data)
data_for_clustering <- merged_data[, c("age", "nbEnfantsAcharge", "taux")]
standardized_data <- scale(data_for_clustering)
# Étape 1 : Fusion des données Clients et Immatriculations
merged_data <- inner_join(clients, immatriculations, by = "immatriculation")
library(tidyverse)
# Étape 1 : Fusion des données Clients et Immatriculations
merged_data <- inner_join(clients, immatriculations, by = "immatriculation")
# Étape 1 : Fusion des données Clients et Immatriculations
merged_data <- inner_join(distinct(clients), distinct(immatriculations), by = "immatriculation")
# Étape 1 : Fusion des données Clients et Immatriculations
merged_data <- inner_join(distinct(clients), distinct(immatriculations), by = "immatriculation", relationship = "many-to-many")
# Étape 1 : Fusion des données Clients et Immatriculations
merged_data <- inner_join(clients, immatriculations, by = "immatriculation", relationship = "many-to-many")
# Étape 2 : Prétraitement des données catégorielles
features <- merged_data %>%
select(age, sexe, taux, situationFamiliale, nbEnfantsAcharge, X2eme.voiture)
# Convertir les variables catégorielles en facteurs
features <- features %>%
mutate(across(where(is.character), as.factor))
diss_matrix <- daisy(features, metric = "gower")
library(cluster)
library(ggplot2)
library(tidyverse)
clients <- read.csv("Clients_10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- read.csv("Immatriculations.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
clients <- clients[0:20000]
immatriculations <- immatriculations[0:50000]
immatriculations <- immatriculations[0:50000,]
# Étape 1 : Fusion des données Clients et Immatriculations
merged_data <- inner_join(clients, immatriculations, by = "immatriculation", relationship = "many-to-many")
# Étape 2 : Prétraitement des données catégorielles
features <- merged_data %>%
select(age, sexe, taux, situationFamiliale, nbEnfantsAcharge, X2eme.voiture)
# Convertir les variables catégorielles en facteurs
features <- features %>%
mutate(across(where(is.character), as.factor))
diss_matrix <- daisy(features, metric = "gower")
View(merged_data)
View(merged_data)
View(merged_data)
View(immatriculations)
View(merged_data)
View(immatriculations)
View(data_for_clustering)
gc()
library(cluster)
library(ggplot2)
library(tidyverse)
clients <- read.csv("Clients_10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- read.csv("Immatriculations.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
library(cluster)
library(ggplot2)
library(tidyverse)
clients <- read.csv("Clients_10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- read.csv("Immatriculations.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- immatriculations[100000:500000,]
str(clients)
str(immatriculations)
clients_immatriculations <- merge(clients, immatriculations, by = "immatriculation")
str(clients_immatriculations)
summary(dmatrix)
View(immatriculations)
View(clients_immatriculations)
str(clients_immatriculations)
dmatrix <- daisy(produit)
dmatrix <- daisy(clients_immatriculations)
km4 <- kmeans(dmatrix, centers = 4)
km4 <- kmeans(dmatrix, centers = 4)
produit_km4 <- data.frame(clients_immatriculations, km4$cluster)
View(produit_km4)
library(cluster)
library(ggplot2)
library(tidyverse)
clients <- read.csv("Clients_10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- read.csv("Immatriculations.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- immatriculations[100000:1000000,]
str(clients)
str(immatriculations)
clients_immatriculations <- merge(clients, immatriculations, by = "immatriculation")
str(clients_immatriculations)
dmatrix <- daisy(clients_immatriculations)
# DIANA
dia <- diana(dmatrix)
plot(dia, which.plots=2)
rect.hclust(dia, k=4, border="red")
dia4 <- cutree(dia, k=4)
table(dia4, produit$Produit)
dmatrix <- daisy(clients_immatriculations[,c("age","sexe","situationFamiliale", "nbEnfantsAcharge")])
gc()
gc()
library(cluster)
library(ggplot2)
library(tidyverse)
clients <- read.csv("Clients_10.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- read.csv("Immatriculations.csv", header = TRUE, dec = ".",
stringsAsFactors = TRUE)
immatriculations <- immatriculations[100000:1000000,]
str(clients)
str(immatriculations)
clients_immatriculations <- merge(clients, immatriculations, by = "immatriculation")
clients_immatriculations[-1]
str(clients_immatriculations)
matrice_distances <- daisy(clients_immatriculations)
# CLUSTERING
cluster <- kmeans(matrice_distances, 4)
str(cluster$cluster)
str(cluster$centers)
ggplot(clients_immatriculations, aes(x = immatriculation, y = age, color = as.factor(cluster$cluster))) +
geom_point() +
scale_color_discrete(name = "Cluster") +
theme(legend.position = "bottom") +
labs(x = "Immatriculation", y = "Age")
ggplot(clients_immatriculations, aes(x = nbPlaces, y = nbEnfantsAcharge, color = as.factor(cluster$cluster))) +
geom_point() +
scale_color_discrete(name = "Cluster") +
theme(legend.position = "bottom") +
labs(x = "Places", y = "Nb Enfants")
ggplot(clients_immatriculations, aes(x = nbPlaces, y = nbEnfantsAcharge, color = as.factor(cluster$cluster))) +
geom_point() +
scale_color_discrete(name = "Cluster") +
theme(legend.position = "bottom") +
labs(x = "Places", y = "Nb Enfants") +
geom_jitter(width = 0.3, height = 0.3)
View(clients_immatriculations)
View(clients_immatriculations)
